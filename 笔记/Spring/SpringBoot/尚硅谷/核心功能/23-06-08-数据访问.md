# 数据访问

## SQL

### 数据源的自动配置

#### 导入JDBC场景

```xml
<dependency>
    <groupId>org.springframework.boot</groupId>
    <artifactId>spring-boot-starter-data-jdbc</artifactId>
</dependency>
```

HikariDataSource 默认数据源

![1686792054586](image/23-06-08-数据访问/1686792054586.png)

数据库驱动？
为什么导入JDBC场景时，官方不导入驱动？因为官方不知道我们接下要操作什么数据库。
数据库版本和驱动版本对应

```xml
默认版本：<mysql.version>8.0.22</mysql.version>

        <dependency>
            <groupId>mysql</groupId>
            <artifactId>mysql-connector-java</artifactId>
<!--            <version>5.1.49</version>-->
        </dependency>
想要修改版本
1、直接依赖引入具体版本（maven的就近依赖原则）
2、重新声明版本（maven的属性的就近优先原则）
    <properties>
        <java.version>1.8</java.version>
        <mysql.version>5.1.49</mysql.version>
    </properties>
```

#### 分析自动配置

自动配置的类：

1. DataSourceAutoConfiguration ： 数据源的自动配置
   1）修改数据源相关的配置：spring.datasource
   2）数据库连接池的配置，是自己容器中没有DataSource才自动配置的
   3）底层配置好的连接池是：HikariDataSource
2. DataSourceTransactionManagerAutoConfiguration： 事务管理器的自动配置
3. JdbcTemplateAutoConfiguration： JdbcTemplate的自动配置，可以来对数据库进行crud
   1）可以修改这个配置项@ConfigurationProperties(prefix = "spring.jdbc") 来修改JdbcTemplate
   2）@Bean@Primary    JdbcTemplate；容器中有这个组件
4. JndiDataSourceAutoConfiguration： jndi的自动配置
5. XADataSourceAutoConfiguration： 分布式事务相关的
